/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(function() {
var exports = {};
exports.id = "pages/api/webhook";
exports.ids = ["pages/api/webhook"];
exports.modules = {

/***/ "./src/pages/api/webhook.js":
/*!**********************************!*\
  !*** ./src/pages/api/webhook.js ***!
  \**********************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"config\": function() { return /* binding */ config; }\n/* harmony export */ });\n/* harmony import */ var micro__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! micro */ \"micro\");\n/* harmony import */ var micro__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(micro__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var firebase_admin__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! firebase-admin */ \"firebase-admin\");\n/* harmony import */ var firebase_admin__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(firebase_admin__WEBPACK_IMPORTED_MODULE_1__);\n\n // getting permissions json or we can do import\n\nconst serviceAccount = __webpack_require__(/*! ../../../permissions.json */ \"./permissions.json\"); // if there is no app already initialized\n// secure connection to the firebase from backend\n\n\nconst app = !firebase_admin__WEBPACK_IMPORTED_MODULE_1__.apps.length ? firebase_admin__WEBPACK_IMPORTED_MODULE_1__.initializeApp({\n  // if there is no app, so we initialize the app\n  // for certificates we use this one from permissions.json\n  credential: firebase_admin__WEBPACK_IMPORTED_MODULE_1__.credential.cert(serviceAccount)\n}) : firebase_admin__WEBPACK_IMPORTED_MODULE_1__.app(); // or we just use the app which is already configured\n// establish the connection to stripe\n// as the key, key from env variables\n\nconst stripe = __webpack_require__(/*! stripe */ \"stripe\")(process.env.STRIPE_SECRET_KEY); // endpoint key goes in here\n\n\nconst endpointSecret = process.env.STRIPE_SIGNING_SECRET; // after everything is done, the order fulfill function fires to upload the order to the database\n\nconst fulfilOrder = async session => {\n  console.log(\"Fulfilling order \"); // here we push it into the firebase firestore to make access from the db\n  // stripe session id of customer\n\n  return app.firestore().collection('users').doc(session.metadata.email).collection('orders').doc(session.id).set({\n    // divide by 100 because we pushed to the normal currecy understanding\n    // we just add all these things to the firebase database\n    amount: session.amount_total / 100,\n    amount_shipped: session.total_details.amount_shipping / 100,\n    // this will give the images back\n    images: JSON.parse(session.metadata.images),\n    timestamp: firebase_admin__WEBPACK_IMPORTED_MODULE_1__.firestore.FieldValue.serverTimestamp()\n  }).then(() => {\n    console.log(`SUCCESS: Order ${session.id} had been added to the DB in firebase`);\n  });\n};\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (async (req, res) => {\n  if (req.method === 'POST') {\n    // here we check if the method is post request\n    // this is funky stuff\n    // verifying, then the webhook is triggered on, after the webhook is pushed after the payment, verify that the event is genue event\n    // consume request as the buffer shit, to generate the certificate to make the webhook fire on\n    const requestBuffer = await (0,micro__WEBPACK_IMPORTED_MODULE_0__.buffer)(req);\n    const payload = requestBuffer.toString(); // representing the signature\n\n    const sig = req.headers[\"stripe-signature\"]; // this will change\n\n    let event; // verify that the posted event came from the stripe\n\n    try {\n      //here we verify that the event came from stripe with these generated signatures and certificates, in all shitty products, just copy\n      // this code and especially the comments\n      // this line verifies that event came from stripe and not from somewhere else\n      event = stripe.webhooks.constructEvent(payload, sig, endpointSecret);\n    } catch (err) {\n      // this is showing then the error occured\n      console.log(\"Error \", err.message);\n      return res.status(400).send(`Webhook error: ${err.message}`);\n    } // handle the special checkout session completed event\n    // then the checkout happens, the payment is done, the completed event fires on\n\n\n    if (event.type === 'checkout.session.completed') {\n      // this checks if it is  completd event\n      // if yes, we just store the event data object in the session object in here\n      const session = event.data.object; // Fullfill the order at this time\n      // put it into the database, to show the user, that it is in the database, to send for company to ship it and so on\n      // we want to store it in the firebase\n      // here we pass the session data from the successful order in the stripe, then returns the success status, if note, so the error returns\n\n      return fulfilOrder(session).then(() => res.status(200)).catch(err => res.status(400).send(`Webhook error ${err.message}`));\n    }\n  }\n});\nconst config = {\n  api: {\n    // we just want it as the stream\n    bodyParser: false,\n    // this means that is resolved by stripe, not by us\n    externalResolver: true\n  }\n};//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly93aXRoLXJlZHV4LXRvb2xraXQvLi9zcmMvcGFnZXMvYXBpL3dlYmhvb2suanM/NGY2ZiJdLCJuYW1lcyI6WyJzZXJ2aWNlQWNjb3VudCIsInJlcXVpcmUiLCJhcHAiLCJhZG1pbiIsImNyZWRlbnRpYWwiLCJzdHJpcGUiLCJwcm9jZXNzIiwiZW52IiwiU1RSSVBFX1NFQ1JFVF9LRVkiLCJlbmRwb2ludFNlY3JldCIsIlNUUklQRV9TSUdOSU5HX1NFQ1JFVCIsImZ1bGZpbE9yZGVyIiwic2Vzc2lvbiIsImNvbnNvbGUiLCJsb2ciLCJmaXJlc3RvcmUiLCJjb2xsZWN0aW9uIiwiZG9jIiwibWV0YWRhdGEiLCJlbWFpbCIsImlkIiwic2V0IiwiYW1vdW50IiwiYW1vdW50X3RvdGFsIiwiYW1vdW50X3NoaXBwZWQiLCJ0b3RhbF9kZXRhaWxzIiwiYW1vdW50X3NoaXBwaW5nIiwiaW1hZ2VzIiwiSlNPTiIsInBhcnNlIiwidGltZXN0YW1wIiwidGhlbiIsInJlcSIsInJlcyIsIm1ldGhvZCIsInJlcXVlc3RCdWZmZXIiLCJidWZmZXIiLCJwYXlsb2FkIiwidG9TdHJpbmciLCJzaWciLCJoZWFkZXJzIiwiZXZlbnQiLCJ3ZWJob29rcyIsImNvbnN0cnVjdEV2ZW50IiwiZXJyIiwibWVzc2FnZSIsInN0YXR1cyIsInNlbmQiLCJ0eXBlIiwiZGF0YSIsIm9iamVjdCIsImNhdGNoIiwiY29uZmlnIiwiYXBpIiwiYm9keVBhcnNlciIsImV4dGVybmFsUmVzb2x2ZXIiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7O0FBQUE7Q0FHQTs7QUFDQSxNQUFNQSxjQUFjLEdBQUdDLG1CQUFPLENBQUMscURBQUQsQ0FBOUIsQyxDQUVBO0FBQ0E7OztBQUNBLE1BQU1DLEdBQUcsR0FBRyxDQUFDQyx1REFBRCxHQUFxQkEseURBQUEsQ0FBb0I7QUFDakQ7QUFDQTtBQUNBQyxZQUFVLEVBQUVELDJEQUFBLENBQXNCSCxjQUF0QjtBQUhxQyxDQUFwQixDQUFyQixHQUlQRywr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QTBDTyxNQUFNTyxNQUFNLEdBQUc7QUFDbEJDLEtBQUcsRUFBRTtBQUNEO0FBQ0FDLGNBQVUsRUFBRSxLQUZYO0FBR0Q7QUFDQUMsb0JBQWdCLEVBQUU7QUFKakI7QUFEYSxDQUFmIiwiZmlsZSI6Ii4vc3JjL3BhZ2VzL2FwaS93ZWJob29rLmpzLmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgYnVmZmVyIH0gZnJvbSAnbWljcm8nO1xuaW1wb3J0ICogYXMgYWRtaW4gZnJvbSAnZmlyZWJhc2UtYWRtaW4nO1xuXG4vLyBnZXR0aW5nIHBlcm1pc3Npb25zIGpzb24gb3Igd2UgY2FuIGRvIGltcG9ydFxuY29uc3Qgc2VydmljZUFjY291bnQgPSByZXF1aXJlKCcuLi8uLi8uLi9wZXJtaXNzaW9ucy5qc29uJyk7XG5cbi8vIGlmIHRoZXJlIGlzIG5vIGFwcCBhbHJlYWR5IGluaXRpYWxpemVkXG4vLyBzZWN1cmUgY29ubmVjdGlvbiB0byB0aGUgZmlyZWJhc2UgZnJvbSBiYWNrZW5kXG5jb25zdCBhcHAgPSAhYWRtaW4uYXBwcy5sZW5ndGggPyBhZG1pbi5pbml0aWFsaXplQXBwKHtcbiAgICAvLyBpZiB0aGVyZSBpcyBubyBhcHAsIHNvIHdlIGluaXRpYWxpemUgdGhlIGFwcFxuICAgIC8vIGZvciBjZXJ0aWZpY2F0ZXMgd2UgdXNlIHRoaXMgb25lIGZyb20gcGVybWlzc2lvbnMuanNvblxuICAgIGNyZWRlbnRpYWw6IGFkbWluLmNyZWRlbnRpYWwuY2VydChzZXJ2aWNlQWNjb3VudCksXG59KSA6IGFkbWluLmFwcCgpO1xuLy8gb3Igd2UganVzdCB1c2UgdGhlIGFwcCB3aGljaCBpcyBhbHJlYWR5IGNvbmZpZ3VyZWRcblxuLy8gZXN0YWJsaXNoIHRoZSBjb25uZWN0aW9uIHRvIHN0cmlwZVxuLy8gYXMgdGhlIGtleSwga2V5IGZyb20gZW52IHZhcmlhYmxlc1xuY29uc3Qgc3RyaXBlID0gcmVxdWlyZSgnc3RyaXBlJykocHJvY2Vzcy5lbnYuU1RSSVBFX1NFQ1JFVF9LRVkpO1xuLy8gZW5kcG9pbnQga2V5IGdvZXMgaW4gaGVyZVxuY29uc3QgZW5kcG9pbnRTZWNyZXQgPSBwcm9jZXNzLmVudi5TVFJJUEVfU0lHTklOR19TRUNSRVQ7XG5cbi8vIGFmdGVyIGV2ZXJ5dGhpbmcgaXMgZG9uZSwgdGhlIG9yZGVyIGZ1bGZpbGwgZnVuY3Rpb24gZmlyZXMgdG8gdXBsb2FkIHRoZSBvcmRlciB0byB0aGUgZGF0YWJhc2VcbmNvbnN0IGZ1bGZpbE9yZGVyID0gYXN5bmMgKHNlc3Npb24pID0+IHtcbiAgICBjb25zb2xlLmxvZyhcIkZ1bGZpbGxpbmcgb3JkZXIgXCIpO1xuXG4gICAgLy8gaGVyZSB3ZSBwdXNoIGl0IGludG8gdGhlIGZpcmViYXNlIGZpcmVzdG9yZSB0byBtYWtlIGFjY2VzcyBmcm9tIHRoZSBkYlxuICAgIC8vIHN0cmlwZSBzZXNzaW9uIGlkIG9mIGN1c3RvbWVyXG4gICAgcmV0dXJuIGFwcC5maXJlc3RvcmUoKS5jb2xsZWN0aW9uKCd1c2VycycpLmRvYyhzZXNzaW9uLm1ldGFkYXRhLmVtYWlsKS5jb2xsZWN0aW9uKCdvcmRlcnMnKS5kb2Moc2Vzc2lvbi5pZCkuc2V0KHtcbiAgICAgICAgLy8gZGl2aWRlIGJ5IDEwMCBiZWNhdXNlIHdlIHB1c2hlZCB0byB0aGUgbm9ybWFsIGN1cnJlY3kgdW5kZXJzdGFuZGluZ1xuICAgICAgICAvLyB3ZSBqdXN0IGFkZCBhbGwgdGhlc2UgdGhpbmdzIHRvIHRoZSBmaXJlYmFzZSBkYXRhYmFzZVxuICAgICAgICBhbW91bnQ6IHNlc3Npb24uYW1vdW50X3RvdGFsIC8gMTAwLFxuICAgICAgICBhbW91bnRfc2hpcHBlZDogc2Vzc2lvbi50b3RhbF9kZXRhaWxzLmFtb3VudF9zaGlwcGluZyAvIDEwMCxcbiAgICAgICAgLy8gdGhpcyB3aWxsIGdpdmUgdGhlIGltYWdlcyBiYWNrXG4gICAgICAgIGltYWdlczogSlNPTi5wYXJzZShzZXNzaW9uLm1ldGFkYXRhLmltYWdlcyksXG4gICAgICAgIHRpbWVzdGFtcDogYWRtaW4uZmlyZXN0b3JlLkZpZWxkVmFsdWUuc2VydmVyVGltZXN0YW1wKCksXG4gICAgfSlcbiAgICAgICAgLnRoZW4oKCkgPT4ge1xuICAgICAgICAgICAgY29uc29sZS5sb2coYFNVQ0NFU1M6IE9yZGVyICR7c2Vzc2lvbi5pZH0gaGFkIGJlZW4gYWRkZWQgdG8gdGhlIERCIGluIGZpcmViYXNlYCk7XG4gICAgICAgIH0pO1xufTtcblxuZXhwb3J0IGRlZmF1bHQgYXN5bmMgKHJlcSwgcmVzKSA9PiB7XG4gICAgaWYocmVxLm1ldGhvZCA9PT0gJ1BPU1QnKSB7XG4gICAgICAgIC8vIGhlcmUgd2UgY2hlY2sgaWYgdGhlIG1ldGhvZCBpcyBwb3N0IHJlcXVlc3RcbiAgICAgICAgLy8gdGhpcyBpcyBmdW5reSBzdHVmZlxuICAgICAgICAvLyB2ZXJpZnlpbmcsIHRoZW4gdGhlIHdlYmhvb2sgaXMgdHJpZ2dlcmVkIG9uLCBhZnRlciB0aGUgd2ViaG9vayBpcyBwdXNoZWQgYWZ0ZXIgdGhlIHBheW1lbnQsIHZlcmlmeSB0aGF0IHRoZSBldmVudCBpcyBnZW51ZSBldmVudFxuICAgICAgICAvLyBjb25zdW1lIHJlcXVlc3QgYXMgdGhlIGJ1ZmZlciBzaGl0LCB0byBnZW5lcmF0ZSB0aGUgY2VydGlmaWNhdGUgdG8gbWFrZSB0aGUgd2ViaG9vayBmaXJlIG9uXG4gICAgICAgIGNvbnN0IHJlcXVlc3RCdWZmZXIgPSBhd2FpdCBidWZmZXIocmVxKTtcblxuICAgICAgICBjb25zdCBwYXlsb2FkID0gcmVxdWVzdEJ1ZmZlci50b1N0cmluZygpO1xuICAgICAgICAvLyByZXByZXNlbnRpbmcgdGhlIHNpZ25hdHVyZVxuICAgICAgICBjb25zdCBzaWcgPSByZXEuaGVhZGVyc1tcInN0cmlwZS1zaWduYXR1cmVcIl07XG4gICAgICAgIC8vIHRoaXMgd2lsbCBjaGFuZ2VcbiAgICAgICAgbGV0IGV2ZW50O1xuICAgICAgICAvLyB2ZXJpZnkgdGhhdCB0aGUgcG9zdGVkIGV2ZW50IGNhbWUgZnJvbSB0aGUgc3RyaXBlXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICAvL2hlcmUgd2UgdmVyaWZ5IHRoYXQgdGhlIGV2ZW50IGNhbWUgZnJvbSBzdHJpcGUgd2l0aCB0aGVzZSBnZW5lcmF0ZWQgc2lnbmF0dXJlcyBhbmQgY2VydGlmaWNhdGVzLCBpbiBhbGwgc2hpdHR5IHByb2R1Y3RzLCBqdXN0IGNvcHlcbiAgICAgICAgICAgIC8vIHRoaXMgY29kZSBhbmQgZXNwZWNpYWxseSB0aGUgY29tbWVudHNcbiAgICAgICAgICAgIC8vIHRoaXMgbGluZSB2ZXJpZmllcyB0aGF0IGV2ZW50IGNhbWUgZnJvbSBzdHJpcGUgYW5kIG5vdCBmcm9tIHNvbWV3aGVyZSBlbHNlXG4gICAgICAgICAgICBldmVudCA9IHN0cmlwZS53ZWJob29rcy5jb25zdHJ1Y3RFdmVudChwYXlsb2FkLCBzaWcsIGVuZHBvaW50U2VjcmV0KTtcbiAgICAgICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICAvLyB0aGlzIGlzIHNob3dpbmcgdGhlbiB0aGUgZXJyb3Igb2NjdXJlZFxuICAgICAgICAgICAgY29uc29sZS5sb2coXCJFcnJvciBcIiwgZXJyLm1lc3NhZ2UpO1xuICAgICAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5zZW5kKGBXZWJob29rIGVycm9yOiAke2Vyci5tZXNzYWdlfWApO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gaGFuZGxlIHRoZSBzcGVjaWFsIGNoZWNrb3V0IHNlc3Npb24gY29tcGxldGVkIGV2ZW50XG4gICAgICAgIC8vIHRoZW4gdGhlIGNoZWNrb3V0IGhhcHBlbnMsIHRoZSBwYXltZW50IGlzIGRvbmUsIHRoZSBjb21wbGV0ZWQgZXZlbnQgZmlyZXMgb25cbiAgICAgICAgaWYoZXZlbnQudHlwZSA9PT0gJ2NoZWNrb3V0LnNlc3Npb24uY29tcGxldGVkJykge1xuICAgICAgICAgICAgLy8gdGhpcyBjaGVja3MgaWYgaXQgaXMgIGNvbXBsZXRkIGV2ZW50XG4gICAgICAgICAgICAvLyBpZiB5ZXMsIHdlIGp1c3Qgc3RvcmUgdGhlIGV2ZW50IGRhdGEgb2JqZWN0IGluIHRoZSBzZXNzaW9uIG9iamVjdCBpbiBoZXJlXG4gICAgICAgICAgICBjb25zdCBzZXNzaW9uID0gZXZlbnQuZGF0YS5vYmplY3Q7XG5cbiAgICAgICAgICAgIC8vIEZ1bGxmaWxsIHRoZSBvcmRlciBhdCB0aGlzIHRpbWVcbiAgICAgICAgICAgIC8vIHB1dCBpdCBpbnRvIHRoZSBkYXRhYmFzZSwgdG8gc2hvdyB0aGUgdXNlciwgdGhhdCBpdCBpcyBpbiB0aGUgZGF0YWJhc2UsIHRvIHNlbmQgZm9yIGNvbXBhbnkgdG8gc2hpcCBpdCBhbmQgc28gb25cbiAgICAgICAgICAgIC8vIHdlIHdhbnQgdG8gc3RvcmUgaXQgaW4gdGhlIGZpcmViYXNlXG5cbiAgICAgICAgICAgIC8vIGhlcmUgd2UgcGFzcyB0aGUgc2Vzc2lvbiBkYXRhIGZyb20gdGhlIHN1Y2Nlc3NmdWwgb3JkZXIgaW4gdGhlIHN0cmlwZSwgdGhlbiByZXR1cm5zIHRoZSBzdWNjZXNzIHN0YXR1cywgaWYgbm90ZSwgc28gdGhlIGVycm9yIHJldHVybnNcbiAgICAgICAgICAgIHJldHVybiBmdWxmaWxPcmRlcihzZXNzaW9uKS50aGVuKCgpID0+IHJlcy5zdGF0dXMoMjAwKSkuY2F0Y2goZXJyID0+IHJlcy5zdGF0dXMoNDAwKS5zZW5kKGBXZWJob29rIGVycm9yICR7ZXJyLm1lc3NhZ2V9YCkpO1xuICAgICAgICB9XG4gICAgfVxufTtcblxuZXhwb3J0IGNvbnN0IGNvbmZpZyA9IHtcbiAgICBhcGk6IHtcbiAgICAgICAgLy8gd2UganVzdCB3YW50IGl0IGFzIHRoZSBzdHJlYW1cbiAgICAgICAgYm9keVBhcnNlcjogZmFsc2UsXG4gICAgICAgIC8vIHRoaXMgbWVhbnMgdGhhdCBpcyByZXNvbHZlZCBieSBzdHJpcGUsIG5vdCBieSB1c1xuICAgICAgICBleHRlcm5hbFJlc29sdmVyOiB0cnVlLFxuICAgIH1cbn0iXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/pages/api/webhook.js\n");

/***/ }),

/***/ "./permissions.json":
/*!**************************!*\
  !*** ./permissions.json ***!
  \**************************/
/***/ (function(module) {

"use strict";
module.exports = JSON.parse('{"type":"service_account","project_id":"rookas-sales-app","private_key_id":"d4fafdbc24bf54c87f693bd4c9bfd17f0a639b98","private_key":"-----BEGIN PRIVATE KEY-----\\nMIIEvQIBADANBgkqhkiG9w0BAQEFAASCBKcwggSjAgEAAoIBAQCOT/0Oc8be0Vv0\\nUY9bsXHOqJqRW6Q2PRFkFjUag3muJ+1gM9p76UUzPA/1EWayYlwDHPioaQ7vz+Yn\\nubY8t4PoXQGRq6JxOcvJLWsYca9soXBS3xG5RMQa1LoisOwx5F1zPbbIhtgasoe8\\nhnLcwc7Gvn/iNqT+mplqHdaPihzSaRxMH4Rgkb/rYTvRUF1HiPlZuijxXRyiVb8M\\ndMKjtEZNZMAYnCxtHlBzR9kNDW2Tg7RUJu5eMn6VorqaLCbzgI88TltOd/gKDu5f\\n+BN3rpHJUBbUEYAER8dJdTRoyGrW9Lx6gMJeCUwin32DyEGWDanUJkSvBLc23O8o\\nc8f33l8LAgMBAAECggEABa7CGybMQk8mL5It8ubg9XQYpNpE5BlWRn8iErcED6/Z\\nPqfKhkJ71PdMvWDXcs29coPusp/BjP1bvuORQvO/BYFak9okD3ia9Nxml4sCJzNf\\nUctiLxLhRZE6d4fT0/5pnuBB759hevRSK8q9C8ShMoSQS/D9b8SR1gjEbbusR/UD\\nY9FSW7OWnBlSpmu1+t4DPRiUBiTxlOVVe8rE4sga2qg2RY6ZLju3/aFJj2AhL6ff\\nwQe34j163Kr64UeVLpDtQLN/I+du8fn1Cpr9F1u6Xx7mg4pufgu5al7phsVFmjvL\\nmS2NJN0EgSPKf3xPNhHO7YM3aPLYDVxGrk7uncksHQKBgQDElxTNOY/4OHEwNFAX\\ni5vJbDQWF6sxNlumZdelqnreMiBwxbSKSCpVjyCIP6Uyg9uv9/Ycb654q8hvmeGR\\ngIuv0bOY+5+6WVu4iZBrQMnXD3GgC2miw0ljoXKSdUajhyjfkW3UBKSDKR3tjbHI\\nHeyRdvTSiRqRajJOvvXvRtAHZQKBgQC5UcohAxE6QRqzDwizTj6qDOvhYOmldfEG\\n2dDxR37HHImaeEfmzPhe/wy6GXPDMYIm00W8UnTOkZT9qB95bf1PCZOmVXvyqaDS\\ntWAgjCjK3C258LhRNGhWIuvYILirlWAhtIAp3f08JwZv9kqZ0qLlo1iVRF9zDhWH\\nJLtj+4l9rwKBgQCN1LorPeZCnOX8cyF9ezmP3kLN1ZGq1Z7VtBAa853lhKCm+9w/\\nD8WLKNG9ur1CbqMml2y2I1TqtnTLH2gAA4/D7zT1oEQiu6lSv9yzpHB6eift4Y36\\n4Y2nFamFRJsMC81PTqrAFgFip11yL5Id4Ij2ga4r3sKOOuHEsjzYvmwDiQKBgG65\\nfJCO2Zs5zO8RW3xukqhdwg3OLquqtVEHkXyn4AqtdVXy6drvurJfp0YF8RG+Iep6\\nrx7fEWVevGt2KSAPZJr1uN9YEg+h5DIhJocr1y+lsDh5qFb0fiaBBPMEUfJK9L4O\\nr8jUFvr6wjDhMh+IJ8YW+9VrnbALyTcO7lvFrZeHAoGAQLyZeWLPhjYT8TUX+lcl\\nY5ydhdCBpS8CtmTfcD4mUUzzMV1HyPYf5g71zQ7/lVob9r0Qotni70ENQ/63hcW9\\n+FdRswjvNwbqX0yDSaS+y+WFc2PLVUWEzT2HXZwVwlwLiAnXAlF/0vphZJDJgPvL\\nuEx27jSVr1oZhl+r2OFyfHE=\\n-----END PRIVATE KEY-----\\n","client_email":"firebase-adminsdk-wzdnk@rookas-sales-app.iam.gserviceaccount.com","client_id":"104492283354357790157","auth_uri":"https://accounts.google.com/o/oauth2/auth","token_uri":"https://oauth2.googleapis.com/token","auth_provider_x509_cert_url":"https://www.googleapis.com/oauth2/v1/certs","client_x509_cert_url":"https://www.googleapis.com/robot/v1/metadata/x509/firebase-adminsdk-wzdnk%40rookas-sales-app.iam.gserviceaccount.com"}');

/***/ }),

/***/ "firebase-admin":
/*!*********************************!*\
  !*** external "firebase-admin" ***!
  \*********************************/
/***/ (function(module) {

"use strict";
module.exports = require("firebase-admin");;

/***/ }),

/***/ "micro":
/*!************************!*\
  !*** external "micro" ***!
  \************************/
/***/ (function(module) {

"use strict";
module.exports = require("micro");;

/***/ }),

/***/ "stripe":
/*!*************************!*\
  !*** external "stripe" ***!
  \*************************/
/***/ (function(module) {

"use strict";
module.exports = require("stripe");;

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = function(moduleId) { return __webpack_require__(__webpack_require__.s = moduleId); }
var __webpack_exports__ = (__webpack_exec__("./src/pages/api/webhook.js"));
module.exports = __webpack_exports__;

})();